menuconfig BSP_USING_PWM2
    bool "Enable ePWM2"
    default n
    if BSP_USING_PWM2
        menu "Basic settings for PWM2"
            config BSP_PWM2_INIT_PERIOD
                int "Initial period for PWM2(ns)"
                default 10000
            config BSP_PWM2_INIT_PULSE
                int "Initial pulse for PWM2(ns)"
                default 1000
        endmenu
        menu "Advanced Settings for PWM2"
            menuconfig BSP_PWM2_PHASE_ENABLE
                bool "Enable phase"
                default n
                if BSP_PWM2_PHASE_ENABLE
                    choice
                        prompt "Select master or slave"
                        default BSP_PWM2_SLAVE
                        config BSP_PWM2_MASTER
                            bool "Master"
                        config BSP_PWM2_SLAVE
                            bool "Slave"
                    endchoice
                    if BSP_PWM2_MASTER
                        config BSP_PWM2_PHASE
                            int
                            default 0
                    endif
                    if BSP_PWM2_SLAVE
                        config BSP_PWM2_PHASE
                            int "Phase, 0~360"
                            range 0 360
                            default 0
                            help
                                the phase for PWM2 module
                    endif
                endif
            
            menuconfig BSP_PWM2_IT_ENABLE
                bool "Enable interrupt service"
                default n
                if BSP_PWM2_IT_ENABLE
                    choice
                        prompt "Select interrupt time"
                        default BSP_PWM2_INTSEL_ET_CTR_ZERO
                        config BSP_PWM2_INTSEL_ET_DCAEVT1SOC
                            bool "DCAEVT1SOC"
                        config BSP_PWM2_INTSEL_ET_CTR_ZERO
                            bool "ctr == zero"
                        config BSP_PWM2_INTSEL_ET_CTR_PRD
                            bool "ctr == prd"
                        config BSP_PWM2_INTSEL_ET_CTR_PRDZERO
                            bool "ctr == prd or ctr == zero"
                        config BSP_PWM2_INTSEL_ET_CTRU_CMPA
                            bool "ctr == compa when counting up"
                        config BSP_PWM2_INTSEL_ET_CTRD_CMPA
                            bool "ctr == compa when counting down"
                        config BSP_PWM2_INTSEL_ET_CTRU_CMPB
                            bool "ctr == compb when counting up"
                        config BSP_PWM2_INTSEL_ET_CTRD_CMPB
                            bool "ctr == compb when counting down"
                    endchoice

                    config BSP_PWM2_INTSEL
                        int
                        default 0 if BSP_PWM2_INTSEL_ET_DCAEVT1SOC
                        default 1 if BSP_PWM2_INTSEL_ET_CTR_ZERO
                        default 2 if BSP_PWM2_INTSEL_ET_CTR_PRD
                        default 3 if BSP_PWM2_INTSEL_ET_CTR_PRDZERO
                        default 4 if BSP_PWM2_INTSEL_ET_CTRU_CMPA
                        default 5 if BSP_PWM2_INTSEL_ET_CTRD_CMPA
                        default 6 if BSP_PWM2_INTSEL_ET_CTRU_CMPB
                        default 7 if BSP_PWM2_INTSEL_ET_CTRD_CMPB
                    choice
                        prompt "Interrupt generation time"
                        default BSP_PWM2_INT_ET_1ST
                        config BSP_PWM2_INT_ET_DISABLE
                            bool "disable PWM interrupt"
                        config BSP_PWM2_INT_ET_1ST
                            bool "generate interrupt at the first time"
                        config BSP_PWM2_INT_ET_2ND
                            bool "generate interrupt at the second time"
                        config BSP_PWM2_INT_ET_3RD
                            bool "generate interrupt at the third time"
                    endchoice
                    config BSP_PWM2_INTPRD
                        int 
                        default 0 if BSP_PWM2_INT_ET_DISABLE
                        default 1 if BSP_PWM2_INT_ET_1ST
                        default 2 if BSP_PWM2_INT_ET_2ND
                        default 3 if BSP_PWM2_INT_ET_3RD
                endif
            choice 
                prompt "HSP Clock division"
                default BSP_PWM2_HSPCLKDIV1
                config BSP_PWM2_HSPCLKDIV1
                    bool "Clock Divided by 1"
                config BSP_PWM2_HSPCLKDIV2
                    bool "Clock Divided by 2"
                config BSP_PWM2_HSPCLKDIV4
                    bool "Clock Divided by 4"
            endchoice
            config BSP_PWM2_HSPCLKDIV
                int 
                default 0 if BSP_PWM2_HSPCLKDIV1
                default 1 if BSP_PWM2_HSPCLKDIV2
                default 2 if BSP_PWM2_HSPCLKDIV4
            choice 
                prompt "Clock division"
                default BSP_PWM2_CLKDIV1
                config BSP_PWM2_CLKDIV1
                    bool "Clock Divided by 1"
                config BSP_PWM2_CLKDIV2
                    bool "Clock Divided by 2"
                config BSP_PWM2_CLKDIV4
                    bool "Clock Divided by 4"
            endchoice
            config BSP_PWM2_CLKDIV
                int 
                default 0 if BSP_PWM2_CLKDIV1
                default 1 if BSP_PWM2_CLKDIV2
                default 2 if BSP_PWM2_CLKDIV4
            choice 
                default BSP_PWM2_CTR_MODE_UPDOWN
                prompt "Select counter mode"
                config BSP_PWM2_CTR_MODE_UPDOWN
                    bool "Up-down mode"
                config BSP_PWM2_CTR_MODE_UP
                    bool "Up mode"
                config BSP_PWM2_CTR_MODE_DOWN
                    bool "Down mode"
                config BSP_PWM2_CTR_FREEZE
                    bool "Freezing Counter"
            endchoice
            config BSP_PWM2_CTRMODE
                int
                default 0 if BSP_PWM2_CTR_MODE_UP
                default 1 if BSP_PWM2_CTR_MODE_DOWN
                default 2 if BSP_PWM2_CTR_MODE_UPDOWN
                default 3 if BSP_PWM2_CTR_FREEZE
            choice
                prompt "Register load mode"
                config BSP_PWM2_CC_CTR_ZERO
                    bool "Load when counter == 0"
                config BSP_PWM2_CC_CTR_PRD
                    bool "Load when counter == prd"
                config BSP_PWM2_CC_CTR_ZERO_PRD
                    bool "load when counter ==0 or counter == prd"
                config BSP_PWM2_CC_LD_DISABLE
                    bool "disable load"
            endchoice

            config BSP_PWM2_LOADAMODE
                int 
                default 0 if BSP_PWM2_CC_CTR_ZERO
                default 1 if BSP_PWM2_CC_CTR_PRD
                default 2 if BSP_PWM2_CC_CTR_ZERO_PRD
                default 3 if BSP_PWM2_CC_LD_DISABLE

            config BSP_PWM2_DB
                int "Dead time(ns)"
                default 100
                range 0 100000
            menuconfig BSP_PWM2_ADC_TRIGGER
                bool "Enable ADC trigger from PWM2"
                if BSP_PWM2_ADC_TRIGGER
                    choice
                        prompt "Select soc triggering time"
                        default BSP_PWM2_SOCASEL_ET_CTR_ZERO
                        config BSP_PWM2_SOCASEL_ET_DCAEVT1SOC
                            bool "DCAEVT1SOC"
                        config BSP_PWM2_SOCASEL_ET_CTR_ZERO
                            bool "ctr == zero"
                        config BSP_PWM2_SOCASEL_ET_CTR_PRD
                            bool "ctr == prd"
                        config BSP_PWM2_SOCASEL_ET_CTR_PRDZERO
                            bool "ctr == prd or ctr == zero"
                        config BSP_PWM2_SOCASEL_ET_CTRU_CMPA
                            bool "ctr == compa when counting up"
                        config BSP_PWM2_SOCASEL_ET_CTRD_CMPA
                            bool "ctr == compa when counting down"
                        config BSP_PWM2_SOCASEL_ET_CTRU_CMPB
                            bool "ctr == compb when counting up"
                        config BSP_PWM2_SOCASEL_ET_CTRD_CMPB
                            bool "ctr == compb when counting down"
                    endchoice

                    config BSP_PWM2_SOCASEL
                        int
                        default 0 if BSP_PWM2_SOCASEL_ET_DCAEVT1SOC
                        default 1 if BSP_PWM2_SOCASEL_ET_CTR_ZERO
                        default 2 if BSP_PWM2_SOCASEL_ET_CTR_PRD
                        default 3 if BSP_PWM2_SOCASEL_ET_CTR_PRDZERO
                        default 4 if BSP_PWM2_SOCASEL_ET_CTRU_CMPA
                        default 5 if BSP_PWM2_SOCASEL_ET_CTRD_CMPA
                        default 6 if BSP_PWM2_SOCASEL_ET_CTRU_CMPB
                        default 7 if BSP_PWM2_SOCASEL_ET_CTRD_CMPB
                    choice
                        prompt "SOCA generation time"
                        default BSP_PWM2_SOCA_ET_1ST
                        config BSP_PWM2_SOCA_ET_DISABLE
                            bool "disable soc generation"
                        config BSP_PWM2_SOCA_ET_1ST
                            bool "generate soc at the first time"
                        config BSP_PWM2_SOCA_ET_2ND
                            bool "generate soc at the second time"
                        config BSP_PWM2_SOCA_ET_3RD
                            bool "generate soc at the third time"
                    endchoice
                    config BSP_PWM2_SOCAPRD
                        int 
                        default 0 if BSP_PWM2_SOCA_ET_DISABLE
                        default 1 if BSP_PWM2_SOCA_ET_1ST
                        default 2 if BSP_PWM2_SOCA_ET_2ND
                        default 3 if BSP_PWM2_SOCA_ET_3RD
                endif
        endmenu
    endif